<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Faktúra {{ invoice_data.invoice_number }}</title>
    <style>
        body {
            font-family: "Helvetica", Arial, sans-serif;
            font-size: 14px;
            color: #333;
            padding: 40px;
        }
        .flex {
            display: flex;
            justify-content: space-between;
        }
        .section {
            margin-bottom: 25px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .table th, .table td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: left;
        }
        .signature-block {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
        }
        .signature {
            width: 45%;
            text-align: center;
        }
        .stamp {
            max-height: 80px;
        }
        .totals {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>Faktúra č.: {{ invoice_data.invoice_number }}</h1>

    <table style="width: 100%; margin-bottom: 25px;">
  <tr>
    <td style="width: 49%; vertical-align: top;">
      <h3>Dodávateľ</h3>
      <p><strong>{{ company_data.name }}</strong></p>
      <p>{{ company_data.street }}</p>
      <p>{{ company_data.zip_code }} {{ company_data.city }}</p>
      <p>{{ company_data.country }}</p>
      <p>IČO: {{ company_data.ico }}</p>
      <p>DIČ: {{ company_data.dic }}</p>
      {% if company_data.is_vat_payer and company_data.ic_dph %}
        <p>IČ DPH: {{ company_data.ic_dph }}</p>
      {% else %}
        <p><em>Dodávateľ nie je platiteľom DPH</em></p>
      {% endif %}
      <p>Email: {{ company_data.email }}</p>
      <p>Telefón: {{ company_data.phone }}</p>
      <p>IBAN: {{ company_data.iban }}</p>
      <p>BIC/SWIFT: {{ company_data.bic }}</p>
    </td>

    <td style="width: 49%; vertical-align: top;">
      <h3>Odberateľ</h3>
      <p><strong>{{ client_data.name }}</strong></p>
      <p>{{ client_data.street }}</p>
      <p>{{ client_data.zip_code }} {{ client_data.city }}</p>
      <p>{{ client_data.country }}</p>
      <p>IČO: {{ client_data.ico }}</p>
      <p>DIČ: {{ client_data.dic }}</p>
      {% if client_data.ic_dph %}
        <p>IČ DPH: {{ client_data.ic_dph }}</p>
      {% else %}
        <p><em>Odberateľ nie je platiteľom DPH</em></p>
      {% endif %}
      <p>Email: {{ client_data.email }}</p>
      <p>Telefón: {{ client_data.phone }}</p>
      <p>IBAN: {{ client_data.iban }}</p>
      <p>BIC/SWIFT: {{ client_data.bic }}</p>
    </td>
  </tr>
</table>

    <div class="section">
        <p><strong>Spôsob úhrady:</strong> {{ company_data.payment_method }}</p>
        <table style="width: 100%; margin-top: 20px; margin-bottom: 30px;">
  <tr>
    <td style="text-align: center;">
      <small>Dátum vystavenia</small><br>
      <strong>{{ invoice_data.date.strftime('%d.%m.%Y') }}</strong>
    </td>
    <td style="text-align: center;">
      <small>Dátum dodania</small><br>
      <strong>{{ invoice_data.date.strftime('%d.%m.%Y') }}</strong>
    </td>
    <td style="text-align: center;">
      <small>Splatnosť faktúry</small><br>
      <strong>{{ invoice_data.due_date.strftime('%d.%m.%Y') }}</strong>
    </td>
  </tr>
</table>

    </div>

    <table class="table">
        <thead>
            <tr>
                <th>Popis</th>
                <th>Množstvo</th>
                <th>MJ</th>
                <th>Cena za MJ</th>
                <th>Celkom</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ invoice_data.description }}</td>
                <td>{{ invoice_data.quantity }}</td>
                <td>{{ invoice_data.unit }}</td>
                <td>{{ invoice_data.price_per_item }} {{ invoice_data.currency }}</td>
                <td>{{ invoice_data.total_cost }} {{ invoice_data.currency }}</td>
            </tr>
        </tbody>
    </table>

    <div class="totals">
        {% if company_data.is_vat_payer %}
            <p>Základ DPH: {{ "%.2f"|format(invoice_data.total_cost) }} {{ invoice_data.currency }}</p>
            <p>Sadzba DPH: {{ invoice_data.vat_rate }}%</p>
            <p>DPH: {{ "%.2f"|format(invoice_data.total_cost * invoice_data.vat_rate / 100) }} {{ invoice_data.currency }}</p>
            <h3>Spolu: {{ "%.2f"|format(invoice_data.total_cost * (1 + invoice_data.vat_rate / 100)) }} {{ invoice_data.currency }}</h3>
        {% else %}
            <h3>Celkom: {{ invoice_data.total_cost }} {{ invoice_data.currency }}</h3>
        {% endif %}
    </div>

    <table style="width: 100%; margin-top: 50px;">
  <tr>
    <td style="width: 50%; text-align: center;">
      <strong>Vyhotovil:</strong><br>
      <img src="{{ url_for('static', filename='stamp.png', _external=True) }}" alt="Stamp" style="max-height: 80px;"><br>
      <hr style="width: 10em;">
    </td>
    <td style="width: 50%; text-align: center;">
      <strong>Prevzal:</strong><br><br><br><br>
      <hr style="width: 10em;">
    </td>
  </tr>
</table>

    <p style="text-align: center; margin-top: 40px; font-style: italic;">Ďakujeme za vašu spoluprácu.</p>

</body>
</html>
